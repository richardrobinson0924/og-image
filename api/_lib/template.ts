import { readFileSync } from 'fs';
import { ParsedRequest } from './types';

const fonts = {
    regular: readFileSync(`${__dirname}/../_fonts/SpaceGrotesk-Medium.woff2`).toString('base64'),
    bold: readFileSync(`${__dirname}/../_fonts/SpaceGrotesk-Bold.woff2`).toString('base64'),
}

function makeCSS() {
    return `
    @font-face {
        font-family: 'Space Grotesk';
        src: url(data:font/woff2;charset=utf-8;base64,${fonts.bold}) format('woff2');
        font-weight: bold;
    }
    
    @font-face {
        font-family: 'Space Grotesk';
        src: url(data:font/woff2;charset=utf-8;base64,${fonts.regular}) format('woff2');
        font-weight: normal;
    }
    
    body {
        background: #95AAF6;
    }
    
    .background {
        padding-top:135px;
        height:495px;
        width:1200px;
    
        background: #95AAF6;
    
        text-align: center;
    }
    
    .shape {
        margin-left:auto;
        margin-right:auto;
        width:932px;
        height:360px;
    
        background: #FFFFFF;
        border-radius: 20px;
    
        text-align: center;
    }
    
    h1 {
        margin-top: 0;
        padding-top: 100px;
    
        font-family: 'Space Grotesk', sans-serif;
        font-style: normal;
        font-weight: bold;
        font-size: 40px;
        /* identical to box height, or 52px */
        letter-spacing: -0.33px;
    
        color: #363D49;
    }
    
    h2 {
        margin-top: 0;
        padding-top: 13px;
    
        font-family: 'Space Grotesk', sans-serif;
        font-style: normal;
        font-weight: normal;
        font-size: 24px;
        line-height: 130%;
        /* or 31px */
        letter-spacing: -0.33px;
    
        color: #363D49;
    
        opacity: 0.8;
    }
    
    p {
        margin-top: 0;
        padding-top: 88px;
    
        font-family: 'Space Grotesk', sans-serif;
        font-style: normal;
        font-weight: bold;
        font-size: 20px;
        /* identical to box height, or 26px */
        letter-spacing: -0.33px;
    
        color: #FFFFFF;
    
        opacity: 0.8;
    }
    
    .vertical-middle {
        vertical-align: middle;
    }
    
    .plane {
        position: absolute;
        width: 395px;
        height: 296px;
        left: -43px;
        top: -8px;
    }
    
    .lightning {
        position: absolute;
        width: 94px;
        height: 121px;
        left: 1043px;
        top: 429px;
    
        border-radius: 1px;
        transform: rotate(7.5deg);
    }
    
    .link-bg {
        margin-left:auto;
        margin-right:auto;
    
        margin-top: 50px;
    
        width: 486px;
        height: 58px;
    
        background: #F1F1F1;
        border-radius: 120px;
    }
    `
}

export function getHtml(parsedReq: ParsedRequest) {
    const { url, title } = parsedReq;

    const heart = `
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M22.2495 3.49235C21.0548 2.14315 19.4036 1.40018 17.6 1.40018C16.1832 1.40018 14.8578 1.97669 13.7672 3.06733C13.0396 3.79497 12.4392 4.72015 12 5.78285C11.5608 4.72015 10.9605 3.79502 10.2329 3.06733C9.14227 1.97669 7.81687 1.40018 6.40008 1.40018C4.59647 1.40018 2.9453 2.14319 1.75064 3.4924C0.638062 4.74869 0 6.4646 0 8.20015C0 10.2841 0.630562 12.3408 1.87411 14.3135C2.85891 15.8756 4.2285 17.3878 5.94497 18.8083C8.85337 21.2152 11.7159 22.5112 11.8364 22.5651C11.9396 22.6114 12.0604 22.6114 12.1636 22.5651C12.2841 22.5112 15.1466 21.2152 18.055 18.8083C19.7715 17.3878 21.141 15.8756 22.1258 14.3135C23.3694 12.3408 24 10.2841 24 8.20015C24 6.4646 23.3619 4.74869 22.2495 3.49235Z" fill="#FF6767"/>
        <path d="M7.54495 18.8083C5.82848 17.3878 4.45889 15.8755 3.47409 14.3135C2.23055 12.3408 1.59998 10.2841 1.59998 8.20013C1.59998 6.46458 2.23805 4.74868 3.35053 3.49233C4.35553 2.35735 5.68373 1.6515 7.15387 1.45594C6.90609 1.4191 6.65452 1.40021 6.40003 1.40021C4.59642 1.40021 2.94525 2.14322 1.75059 3.49243C0.638063 4.74868 0 6.46458 0 8.20013C0 10.2841 0.630562 12.3408 1.87411 14.3135C2.85891 15.8755 4.2285 17.3878 5.94497 18.8083C8.85337 21.2152 11.7159 22.5112 11.8364 22.5651C11.9396 22.6114 12.0604 22.6114 12.1636 22.5651C12.1959 22.5507 12.4254 22.4468 12.8 22.2563C11.7775 21.7364 9.67364 20.5699 7.54495 18.8083Z" fill="#E23333"/>
    </svg>
    `

    const lightning = `
    <svg class="lightning" width="108" height="129" viewBox="0 0 108 129" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M92.1101 10.0911L38.9535 3.05829C38.5367 3.00313 38.1298 3.21468 37.9355 3.58762L8.25971 60.5516C7.9627 61.1218 8.27303 61.82 8.89524 61.9816L44.5503 71.2402C45.1755 71.4025 45.4851 72.1061 45.1824 72.6767L21.0865 118.098C20.5816 119.049 21.7319 120.017 22.583 119.356L101.544 58.071C102.237 57.5329 101.951 56.4266 101.084 56.2928L62.9754 50.412C62.2101 50.2939 61.8636 49.3884 62.3546 48.7897L92.7522 11.7165C93.2493 11.1103 92.8873 10.1939 92.1101 10.0911Z" fill="#FFDD65"/>
    </svg>
    `

    const plane = `
    <svg class="plane" width="353" height="291" viewBox="0 0 353 291" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M-2.72416 271.481C-3.51307 271.734 -3.94765 272.579 -3.69484 273.367C-3.44202 274.156 -2.59754 274.591 -1.80863 274.338L-2.72416 271.481ZM187.835 172.58L189.209 173.183L187.835 172.58ZM136.854 101.397L136.663 99.9096L136.854 101.397ZM64.5646 172.363L66.062 172.45L64.5646 172.363ZM156.27 221.563L156.534 223.04L156.27 221.563ZM286.356 82.5581C286.579 81.7603 286.113 80.9326 285.316 80.7094C284.518 80.4862 283.69 80.952 283.467 81.7498L286.356 82.5581ZM-2.26639 272.91C-1.80863 274.338 -1.80861 274.338 -1.80857 274.338C-1.80855 274.338 -1.80852 274.338 -1.80847 274.338C-1.80839 274.338 -1.80828 274.338 -1.80813 274.338C-1.80784 274.338 -1.80743 274.338 -1.80689 274.338C-1.80582 274.337 -1.80425 274.337 -1.8022 274.336C-1.79809 274.335 -1.79201 274.333 -1.78398 274.33C-1.76793 274.325 -1.74407 274.317 -1.71251 274.307C-1.64938 274.287 -1.55544 274.257 -1.43149 274.216C-1.18359 274.136 -0.815666 274.017 -0.334211 273.859C0.628693 273.544 2.04575 273.077 3.86501 272.469L2.91319 269.624C1.10061 270.23 -0.310079 270.695 -1.26696 271.008C-1.7454 271.164 -2.11038 271.283 -2.35541 271.362C-2.47793 271.402 -2.57046 271.432 -2.63218 271.452C-2.66305 271.462 -2.68621 271.469 -2.70158 271.474C-2.70926 271.476 -2.71499 271.478 -2.71876 271.479C-2.72064 271.48 -2.72203 271.481 -2.72293 271.481C-2.72339 271.481 -2.72371 271.481 -2.72392 271.481C-2.72402 271.481 -2.72409 271.481 -2.72413 271.481C-2.72415 271.481 -2.72416 271.481 -2.72417 271.481C-2.72417 271.481 -2.72416 271.481 -2.26639 272.91ZM15.3875 268.531C18.8056 267.34 22.648 265.983 26.8352 264.475L25.8188 261.653C21.6421 263.157 17.8097 264.51 14.4007 265.698L15.3875 268.531ZM38.282 260.287C41.9008 258.941 45.6826 257.515 49.5916 256.015L48.5168 253.214C44.6182 254.71 40.8462 256.133 37.2366 257.475L38.282 260.287ZM60.9388 251.589C64.6176 250.13 68.3712 248.617 72.174 247.055L71.0344 244.28C67.2435 245.837 63.5011 247.345 59.8328 248.8L60.9388 251.589ZM83.3812 242.368C87.0816 240.791 90.8044 239.173 94.5273 237.521L93.31 234.779C89.6016 236.425 85.8926 238.036 82.205 239.608L83.3812 242.368ZM105.589 232.499C109.276 230.786 112.942 229.042 116.564 227.272L115.246 224.576C111.643 226.338 107.996 228.073 104.325 229.778L105.589 232.499ZM127.413 221.812C131.073 219.914 134.661 217.992 138.153 216.049L136.695 213.428C133.23 215.355 129.668 217.263 126.032 219.149L127.413 221.812ZM148.686 209.944C152.271 207.772 155.71 205.581 158.97 203.378L157.291 200.892C154.077 203.065 150.679 205.228 147.132 207.378L148.686 209.944ZM168.856 196.211C172.279 193.527 175.396 190.829 178.143 188.128L176.04 185.989C173.387 188.597 170.358 191.221 167.005 193.85L168.856 196.211ZM186.158 178.672C187.379 176.847 188.404 175.016 189.209 173.183L186.461 171.977C185.738 173.626 184.802 175.303 183.665 177.004L186.158 178.672ZM189.209 173.183C189.973 171.44 190.663 169.73 191.28 168.053L188.465 167.017C187.869 168.635 187.203 170.288 186.461 171.977L189.209 173.183ZM194.355 157.366C195.147 153.464 195.515 149.767 195.508 146.272L192.508 146.278C192.515 149.557 192.17 153.052 191.415 156.769L194.355 157.366ZM194.1 135.131C193.108 131.349 191.626 127.891 189.761 124.748L187.181 126.278C188.907 129.189 190.279 132.389 191.198 135.892L194.1 135.131ZM182.8 115.925C180.115 113.29 177.135 110.999 173.99 109.035L172.401 111.579C175.38 113.44 178.184 115.599 180.698 118.066L182.8 115.925ZM164.032 104.042C160.482 102.644 156.88 101.587 153.374 100.856L152.762 103.793C156.106 104.49 159.545 105.499 162.932 106.834L164.032 104.042ZM142.285 99.6015C140.306 99.5811 138.419 99.6841 136.663 99.9096L137.045 102.885C138.648 102.679 140.396 102.582 142.254 102.601L142.285 99.6015ZM136.663 99.9096C134.498 100.188 132.235 100.665 129.906 101.321L130.719 104.209C132.928 103.587 135.046 103.142 137.045 102.885L136.663 99.9096ZM117.176 106.314C113.281 108.234 109.322 110.52 105.41 113.108L107.066 115.61C110.88 113.086 114.729 110.865 118.502 109.005L117.176 106.314ZM94.5305 121.21C91.0672 124.096 87.7284 127.197 84.6029 130.463L86.7705 132.537C89.8145 129.356 93.0703 126.332 96.451 123.515L94.5305 121.21ZM75.846 140.86C73.0942 144.618 70.6761 148.514 68.7018 152.491L71.3889 153.825C73.2774 150.021 75.6022 146.271 78.2665 142.633L75.846 140.86ZM64.036 165.41C63.5312 167.693 63.2013 169.985 63.0672 172.275L66.062 172.45C66.1862 170.331 66.4923 168.197 66.9653 166.058L64.036 165.41ZM63.0672 172.275C62.9423 174.406 62.9226 176.504 63.0101 178.562L66.0074 178.435C65.9243 176.482 65.9428 174.486 66.062 172.45L63.0672 172.275ZM65.0121 191.005C66.2195 195.116 67.9656 198.975 70.2673 202.52L72.7835 200.886C70.6475 197.596 69.0199 194.005 67.8905 190.159L65.0121 191.005ZM78.6711 211.995C81.7537 214.588 85.2919 216.864 89.2892 218.785L90.5884 216.081C86.8031 214.262 83.48 212.12 80.6023 209.699L78.6711 211.995ZM101.091 223.051C104.89 224.043 108.978 224.793 113.357 225.284L113.691 222.303C109.442 221.826 105.497 221.1 101.848 220.149L101.091 223.051ZM125.746 225.969C129.685 225.983 133.815 225.82 138.139 225.47L137.897 222.479C133.651 222.823 129.605 222.983 125.757 222.969L125.746 225.969ZM150.438 224.041C152.434 223.743 154.466 223.41 156.534 223.04L156.006 220.087C153.965 220.451 151.962 220.78 149.995 221.074L150.438 224.041ZM156.534 223.04C158.627 222.665 160.691 222.24 162.726 221.765L162.045 218.843C160.06 219.306 158.047 219.721 156.006 220.087L156.534 223.04ZM174.813 218.273C178.83 216.883 182.721 215.3 186.49 213.547L185.225 210.827C181.546 212.538 177.749 214.082 173.832 215.438L174.813 218.273ZM197.619 207.691C201.258 205.547 204.768 203.246 208.152 200.813L206.401 198.377C203.087 200.76 199.653 203.011 196.096 205.107L197.619 207.691ZM218.032 193.056C221.236 190.321 224.312 187.474 227.262 184.542L225.148 182.414C222.248 185.296 219.228 188.091 216.084 190.774L218.032 193.056ZM235.847 175.395C238.63 172.223 241.284 168.988 243.811 165.719L241.438 163.884C238.946 167.107 236.332 170.294 233.592 173.417L235.847 175.395ZM251.194 155.586C253.602 152.081 255.873 148.571 258.011 145.09L255.454 143.52C253.342 146.96 251.099 150.427 248.722 153.887L251.194 155.586ZM264.295 134.285C266.385 130.488 268.314 126.771 270.086 123.183L267.397 121.855C265.643 125.405 263.735 129.082 261.667 132.838L264.295 134.285ZM275.378 111.864C277.234 107.663 278.838 103.764 280.204 100.271L277.409 99.1788C276.059 102.635 274.471 106.493 272.634 110.651L275.378 111.864ZM284.481 88.5156C285.113 86.6281 285.58 85.144 285.89 84.1292C286.045 83.6219 286.161 83.2317 286.238 82.9672C286.277 82.8349 286.306 82.7339 286.325 82.6654C286.335 82.6312 286.343 82.605 286.348 82.5871C286.35 82.5781 286.352 82.5712 286.354 82.5663C286.354 82.5639 286.355 82.562 286.355 82.5607C286.355 82.56 286.356 82.5594 286.356 82.559C286.356 82.5588 286.356 82.5586 286.356 82.5584C286.356 82.5583 286.356 82.5583 286.356 82.5582C286.356 82.5581 286.356 82.5581 284.911 82.1539C283.467 81.7498 283.467 81.7497 283.467 81.7497C283.467 81.7497 283.467 81.7496 283.467 81.7496C283.467 81.7496 283.467 81.7496 283.467 81.7497C283.467 81.7497 283.467 81.75 283.467 81.7503C283.467 81.751 283.466 81.7523 283.466 81.754C283.465 81.7575 283.463 81.763 283.461 81.7706C283.457 81.7858 283.45 81.8092 283.441 81.8407C283.423 81.9037 283.396 81.999 283.359 82.1256C283.285 82.3789 283.172 82.7573 283.021 83.2527C282.718 84.2435 282.259 85.7022 281.636 87.563L284.481 88.5156Z" fill="#C1FFE5" fill-opacity="0.49"/>
        <path d="M339.546 31.691L274.814 85.8818L269.058 60.2965L339.546 31.691Z" fill="#64B8CB"/>
        <path d="M339.774 31.634L269.058 60.2965L249.057 43.7144L339.774 31.634Z" fill="#94E1F2"/>
        <path d="M339.775 31.634L308.779 94.5075L278.347 70.5534L339.775 31.634Z" fill="#94E1F2"/>
        <path d="M274.813 85.8452L278.346 70.5534L285.982 76.557L274.813 85.8452Z" fill="#417884"/>
    </svg>
    `

    return `
    <!DOCTYPE html>
    <html lang="en">
    <meta charset="UTF-8">
    <title>${title}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>${makeCSS()}</style>
    <body>
    <div class="background">
        ${plane}
        <div class="shape">
            <h1>${title}</h1>
            <div class="link-bg">
                <h2>${url}</h2>
            </div>
        </div>
        <div>
            <p>
                Created with ${heart} by Instantish
            </p>
        </div>
        ${lightning}
    </div>
    </body>
    </html>
    `
}